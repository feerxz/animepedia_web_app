{% extends 'layouts/base.html' %}
{% block title %}{{anime.titulo_ingles}}{% endblock %}
{% load static %}
{% block bootstrap_css %}
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
{% endblock %}
{% block content %}
    <main class="anime-details">
        <section class="title-and-image">
            <header>
                <h1>{{anime.titulo_ingles}}</h1>
            </header>
            <div>
                <img src="{{anime.imagen_url}}" alt="Imagen del anime {{anime.titulo_ingles}}" width="300px">
            </div>
            <div class="personajes-container">
                <h3>Personajes</h3>
                <ul>
                    {% for personaje in anime.personajes_id.all %}
                    <div>
                        <a class="info-link" href="{{personaje.url_imagen_personaje}}" target="_blank"><li>{{personaje.nombre}}</li></a>
                        <small>({{personaje.rol}})</small>
                    </div>
                    {% endfor %}
                </ul>
            </div>
        </section>
        <section class="anime-information">
            <h2 class="title-container">Información del Anime</h2>
            <div class="field">
                <h3>Título en Japonés</h3>
                <p>{{anime.titulo_japones}}</p>
            </div>
            <div class="field">
                <h3>Sinopsis</h3>
                <p>{{anime.synopsis}}</p>
            </div>
            <div class="field">
                <h3>Cantidad de episodios</h3>
                <p>{{anime.cantidad_episodios}}</p>
            </div>
            <div class="field">
                <div class="dropdown">
                    <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      Lista de episodios
                    </button>
                    <div class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                      <div class="container-fluid">
                        <div class="row">
                          {% for episodio in anime.episodio.all %}
                            <div class="col-5">
                              <a class="dropdown-item" href="#" style="font-size: 0.75rem; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">{{ episodio.numero_episodio }}. {{ episodio.titulo_episodio }}</a>
                            </div>
                          {% endfor %}
                        </div>
                      </div>
                    </div>
                  </div>
            </div>
            <br>
            <div class="field">
                <h3>Tipo</h3>
                <p>{{anime.tipo}}</p>
            </div>
            <div class="field">
                <h3>Géneros</h3>
                <ul>
                    {% for genero in anime.generos_id.all %}
                        <a class="info-link" href="{{genero.url_descripcion}}" target="_blank"><li>{{genero.nombre}}</li></a>
                    {% endfor %}
                </ul>
            </div>
            <div class="field">
                <h3>Popularidad</h3>
                <p>{{anime.popularidad}}</p>
            </div>
            <div class="field">
                <h3>Puntuación por parte del público</h3>
                <p>{{anime.puntuacion}}</p>
            </div>
            <div class="field">
                <h3>Año de lanzamiento</h3>
                <p>{{anime.year_of_release}}</p>
            </div>
            <div class="field">
                <h3>Productores</h3>
                <ul>
                    {% for productor in anime.productores_id.all %}
                        <a class="info-link" href="{{productor.url_sitio_web}}" target="_blank">
                            <li>{{productor.nombre}} <small>({{productor.nombre_japones}})</small></li>
                        </a>
                    {% endfor %}
                </ul>
            </div>
            <div class="field">
                <h3>Estado</h3>
                <p>{{anime.estado}}</p>
            </div>
        </section>
    </main>
{% endblock %}

{% block bootstrap_js %}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
{% endblock %}